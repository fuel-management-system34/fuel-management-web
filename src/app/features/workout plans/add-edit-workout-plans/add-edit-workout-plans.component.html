<div class="common-dialog">
  <div class="common-dialog-header">
    <h2 mat-dialog-title> Create Workout Plan</h2>
  </div>

  <mat-dialog-content class="common-dialog-content">

    <form [formGroup]="workoutForm">
      <div class="p-4" id="pdfTable">

        <mat-form-field appearance="outline" class="w-full mb-4">
          <mat-label>Workout Plan</mat-label>
          <input matInput formControlName="workoutPlan">
        </mat-form-field>

        <div class="row">
          <div class="col-md-4">
            <mat-form-field appearance="outline" class="w-full mb-4">
              <mat-label>No of Days</mat-label>
              <input matInput type="number" formControlName="noOfDays">
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <mat-form-field appearance="outline" class="w-full mb-4" disabled>
              <mat-label>Created by</mat-label>
              <input matInput formControlName="noOfDays">
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <mat-slide-toggle color="primary">Is Active</mat-slide-toggle>
          </div>
        </div>


        <h3>Workout Routine</h3>

        <div>
          <table mat-table #MatTable [dataSource]="routineArray.controls" class="w-full" formArrayName="routine">
            <!-- No. Column -->
            <ng-container matColumnDef="no">
              <th mat-header-cell *matHeaderCellDef>No.</th>
              <td mat-cell *matCellDef="let row; let i = index">{{ i + 1 }}</td>
            </ng-container>

            <!-- Workout -->
            <ng-container matColumnDef="workout">
              <th mat-header-cell *matHeaderCellDef>Workout *</th>
              <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
                <mat-form-field appearance="fill" class="w-full">
                  <input matInput formControlName="workout">
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Sets -->
            <ng-container matColumnDef="sets">
              <th mat-header-cell *matHeaderCellDef>Sets *</th>
              <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
                <mat-form-field appearance="fill" class="w-full">
                  <input matInput type="number" formControlName="sets">
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Repetition -->
            <ng-container matColumnDef="repetition">
              <th mat-header-cell *matHeaderCellDef>Repetition *</th>
              <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
                <mat-form-field appearance="fill" class="w-full">
                  <input matInput type="number" formControlName="repetition">
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Actions -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let row; let i = index">
                <button mat-icon-button color="warn" (click)="deleteRoutine(i)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['no', 'workout', 'sets', 'repetition', 'actions']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['no', 'workout', 'sets', 'repetition', 'actions'];"
              [formGroupName]="routineArray.controls.indexOf(row)">
            </tr>
          </table>
        </div>

        <button mat-stroked-button color="primary" class="mt-4" (click)="addRoutine()">Add Row</button>

        <button mat-raised-button color="warn" class="ml-2 mt-4" (click)="generateWorkoutPDF()">Print as PDF</button>
      </div>



    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="common-dialog-actions">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="accent" class="ml-2 mt-4" (click)="save()">Save</button>
  </mat-dialog-actions>
</div>